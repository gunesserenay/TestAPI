2023-11-10 00:28:59.052 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-10 00:28:59.291 +03:00 [DBG] Entity Framework Core 7.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.12' with options: None
2023-11-10 00:28:59.387 +03:00 [DBG] 'ApplicationDbContext' disposed.
2023-11-10 00:29:25.958 +03:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-11-10 00:29:26.192 +03:00 [DBG] Entity Framework Core 7.0.12 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:7.0.12' with options: None
2023-11-10 00:29:26.197 +03:00 [DBG] Creating DbConnection.
2023-11-10 00:29:26.216 +03:00 [DBG] Created DbConnection. (17ms).
2023-11-10 00:29:26.217 +03:00 [DBG] Migrating using database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.218 +03:00 [DBG] Opening connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.317 +03:00 [DBG] Opened connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.320 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.322 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1ms).
2023-11-10 00:29:26.322 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (3ms).
2023-11-10 00:29:26.324 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-11-10 00:29:26.341 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-11-10 00:29:26.341 +03:00 [DBG] Closing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.344 +03:00 [DBG] Closed connection to database 'Test_VillaAPI' on server 'localhost' (1ms).
2023-11-10 00:29:26.346 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-10 00:29:26.346 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-10 00:29:26.346 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-11-10 00:29:26.346 +03:00 [DBG] Opening connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.346 +03:00 [DBG] Opened connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.346 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-11-10 00:29:26.355 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-11-10 00:29:26.355 +03:00 [DBG] Closing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.355 +03:00 [DBG] Closed connection to database 'Test_VillaAPI' on server 'localhost' (0ms).
2023-11-10 00:29:26.355 +03:00 [DBG] Opening connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.355 +03:00 [DBG] Opened connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.355 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.355 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.355 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.355 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-11-10 00:29:26.358 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-11-10 00:29:26.358 +03:00 [DBG] Closing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.358 +03:00 [DBG] Closed connection to database 'Test_VillaAPI' on server 'localhost' (0ms).
2023-11-10 00:29:26.359 +03:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-11-10 00:29:26.359 +03:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-11-10 00:29:26.359 +03:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-11-10 00:29:26.359 +03:00 [DBG] Opening connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.359 +03:00 [DBG] Opened connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.359 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-11-10 00:29:26.362 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-11-10 00:29:26.362 +03:00 [DBG] Closing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.362 +03:00 [DBG] Closed connection to database 'Test_VillaAPI' on server 'localhost' (0ms).
2023-11-10 00:29:26.369 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-11-10 00:29:26.369 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-11-10 00:29:26.369 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-11-10 00:29:26.369 +03:00 [DBG] Opening connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.369 +03:00 [DBG] Opened connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.369 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-11-10 00:29:26.375 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-11-10 00:29:26.376 +03:00 [DBG] Closing data reader to 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.376 +03:00 [DBG] A data reader for 'Test_VillaAPI' on server 'localhost' is being disposed after spending 0ms reading results.
2023-11-10 00:29:26.376 +03:00 [DBG] Closing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.376 +03:00 [DBG] Closed connection to database 'Test_VillaAPI' on server 'localhost' (0ms).
2023-11-10 00:29:26.380 +03:00 [INF] Applying migration '20231109212859_AddUsersToDb'.
2023-11-10 00:29:26.404 +03:00 [DBG] Opening connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.404 +03:00 [DBG] Opened connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.405 +03:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-11-10 00:29:26.408 +03:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-11-10 00:29:26.409 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.409 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.409 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.409 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Villas]') AND [c].[name] = N'Name');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Villas] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Villas] SET [Name] = N'' WHERE [Name] IS NULL;
ALTER TABLE [Villas] ALTER COLUMN [Name] nvarchar(max) NOT NULL;
ALTER TABLE [Villas] ADD DEFAULT N'' FOR [Name];
2023-11-10 00:29:26.458 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Villas]') AND [c].[name] = N'Name');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Villas] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Villas] SET [Name] = N'' WHERE [Name] IS NULL;
ALTER TABLE [Villas] ALTER COLUMN [Name] nvarchar(max) NOT NULL;
ALTER TABLE [Villas] ADD DEFAULT N'' FOR [Name];
2023-11-10 00:29:26.458 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.458 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.458 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.459 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [LocalUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(max) NULL,
    [Name] nvarchar(max) NULL,
    [Password] nvarchar(max) NULL,
    [Role] nvarchar(max) NULL,
    CONSTRAINT [PK_LocalUsers] PRIMARY KEY ([Id])
);
2023-11-10 00:29:26.461 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [LocalUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(max) NULL,
    [Name] nvarchar(max) NULL,
    [Password] nvarchar(max) NULL,
    [Role] nvarchar(max) NULL,
    CONSTRAINT [PK_LocalUsers] PRIMARY KEY ([Id])
);
2023-11-10 00:29:26.461 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.461 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.461 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.461 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985630+03:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.464 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985630+03:00'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.464 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.464 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.464 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.464 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985640+03:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.465 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985640+03:00'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.465 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.465 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.465 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.465 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985640+03:00'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.467 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985640+03:00'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.467 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.467 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.467 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.467 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985640+03:00'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.468 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985640+03:00'
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.468 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.468 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.468 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.468 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985650+03:00'
WHERE [Id] = 5;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.469 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [Villas] SET [CreatedDate] = '2023-11-10T00:28:59.2985650+03:00'
WHERE [Id] = 5;
SELECT @@ROWCOUNT;
2023-11-10 00:29:26.469 +03:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-11-10 00:29:26.469 +03:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.469 +03:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-11-10 00:29:26.469 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231109212859_AddUsersToDb', N'7.0.12');
2023-11-10 00:29:26.471 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231109212859_AddUsersToDb', N'7.0.12');
2023-11-10 00:29:26.472 +03:00 [DBG] Committing transaction.
2023-11-10 00:29:26.476 +03:00 [DBG] Committed transaction.
2023-11-10 00:29:26.477 +03:00 [DBG] Disposing transaction.
2023-11-10 00:29:26.477 +03:00 [DBG] Closing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.477 +03:00 [DBG] Closed connection to database 'Test_VillaAPI' on server 'localhost' (0ms).
2023-11-10 00:29:26.478 +03:00 [DBG] 'ApplicationDbContext' disposed.
2023-11-10 00:29:26.479 +03:00 [DBG] Disposing connection to database 'Test_VillaAPI' on server 'localhost'.
2023-11-10 00:29:26.479 +03:00 [DBG] Disposed connection to database '' on server '' (0ms).
